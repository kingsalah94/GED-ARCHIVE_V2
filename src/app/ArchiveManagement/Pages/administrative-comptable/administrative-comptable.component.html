<ul class="nav nav-tabs background-grey" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Home</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="document-tab" data-bs-toggle="tab" data-bs-target="#document-tab-pane" type="button" role="tab" aria-controls="document-tab-pane" aria-selected="false">Documents</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="dossier-tab" data-bs-toggle="tab" data-bs-target="#dossier-tab-pane" type="button" role="tab" aria-controls="dossier-tab-pane" aria-selected="false">Dossiers</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="boite-tab" data-bs-toggle="tab" data-bs-target="#boite-tab-pane" type="button" role="tab" aria-controls="boite-tab-pane" aria-selected="false">Boite D'archives</button>
  </li>
</ul>
<!--============================myTabContent==========================================-->
<div class="tab-content" id="myTabContent">

  <div class="tab-pane fade show active " id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <div class="col-md-6 mt-2 ps-md-2">
      <div class="input-group input-group-sm">
        <input class="form-control form-control-navbar" [(ngModel)]="keyword" type="search" placeholder="Entrez un mot-clÃ©..." aria-label="Search">
        <div class="input-group-append">
          <button class="btn btn-primary" (click)="search()" type="submit">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="container mt-3">
      <div class="row">
        <div class="col-md-4 col-xl-3">
          <div class="card bg-c-blue order-card">
            <div class="card-block">
              <h6 class="m-b-20">Document ARCHIVER</h6>
              <h2 class="text-right"><i class="fa fa-file-archive f-left"></i><span>486</span></h2>
            </div>
          </div>
        </div>
        <div class="col-md-4 col-xl-3">
          <div class="card bg-c-green order-card">
            <div class="card-block">
              <h6 class="m-b-20">Nombre De Dossier</h6>
              <h2 class="text-right"><i class="fa fa-folder-closed f-left"></i><span>486</span></h2>
            </div>
          </div>
        </div>

        <div class="col-md-4 col-xl-3">
          <div class="card bg-c-yellow order-card">
            <div class="card-block">
              <h6 class="m-b-20">Nombre de Boite</h6>
              <h2 class="text-right"><i class="fa fa-box-archive f-left"></i><span>486</span></h2>
            </div>
          </div>
        </div>

        <div class="col-md-4 col-xl-3">
          <div class="card bg-c-pink order-card">
            <div class="card-block">
              <h6 class="m-b-20">Emprunt Effectuer</h6>
              <h2 class="text-right"><i class="fa fa-eye f-left"></i><span>486</span></h2>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--=======Document=====-->
  <div class="tab-pane fade" id="document-tab-pane" role="tabpanel" aria-labelledby="document-tab" tabindex="0">
    <!--Table Contain-->
    <div class="tab-content p-5 opacity-75" id="myTabContainer">
      <div class="tab-pane fade show active" id="users">
        <div class="mb-3 float-end">
          <div class="btn-group me-2">
            <form  class="form-inline my-2 my-lg-0 justify-content-center" action="">
              <input type="search" #searchInput="ngModel"
                     name="keyword" ngModel
                     (ngModelChange)="searchDocuments(searchInput.value)"
                     class="form-control me-sm-2"
                     placeholder="Search documents...">
            </form>
            <!--Add A New User-->
            <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#addDocumentModal">
              <i class="fa fa-plus"></i>New Document
            </button>
          </div>
          <div class="btn-group">
            <button type="button" (click)="getDocuments(true)" class="btn btn-info">
              <i *ngIf="refreshing" class="fas fa-sync fa-spin"></i><i *ngIf="!refreshing" class="fas fa-sync"></i>
            </button>
          </div>
        </div>
        <table class="table table-success table-bordered table-hover table-striped">
          <thead>
          <tr class="text-center">
            <th><a (click)="sortBy('id')">Id {{sortIcon('id')}}</a></th>
            <th>Url Document</th>
            <th><a (click)="sortBy('intituleDocument')">intituleDocument{{sortIcon('intituleDocument')}}</a></th>
            <th><a (click)="sortBy('documentId')">IdentifiantDocument{{sortIcon('documentId')}}</a></th>
            <th>Numero D'ordre</th>
            <th>Nombre de page</th>
            <th>Type de Document</th>
            <th>DateCreation</th>
            <th>Actions</th>
          </tr>
          </thead>
          <tbody *ngFor="let doc of pageOfDocuments">
            <tr class="text-center">
              <td>
               {{doc?.id}}
              </td>
              <td (click)="onSelectDocument(doc)">
                <a href="{{doc?.documentUrl}}"><i class="fas fa-print"></i>Open/Print</a>
              </td>
              <td (click)="onSelectDocument(doc)">{{doc?.intituleDocument}}</td>
              <td (click)="onSelectDocument(doc)">{{doc?.documentId}}</td>
              <td (click)="onSelectDocument(doc)">{{doc?.numeroDordre}}</td>
              <td (click)="onSelectDocument(doc)">{{doc?.nombrPage}}</td>
              <td (click)="onSelectDocument(doc)">{{doc?.typeDocument}}</td>
              <td (click)="onSelectDocument(doc)">{{doc?.dateCreation | date: 'medium'}}</td>
              <td>
                <div class="btn-group">
                  <button class="btn btn-outline-info" (click)="onEditDocument(doc)" >
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="btn btn-outline-danger" (click)="onDeletedocument(doc.intituleDocument)">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
            <tr *ngIf="loading">
              <td colspan="5" class="text-center py-5">
                <span class="spinner-border spinner-border-lg align-center"></span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="card-footer pb-0 pt-3">
        <app-doc-pagination [document]="document" (changePage)="onChangePage($event)"></app-doc-pagination>
      </div>
    </div>

    <!--Button Trigger-->
    <button [hidden]="true" type="button" id="openDocumentInfo" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#viewDocumentModal">
      User Info
    </button>
    <button [hidden]="true" type="button" id="openDocumentEdit" class="btn btn-primary"  data-bs-toggle="modal" data-bs-target="#editDocumentModal">
      Edit
    </button>

    <!--Modal Document Infos-->
    <div class="modal fade" id="viewDocumentModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">{{selectedDocument.intituleDocument}} {{selectedDocument.numeroDordre}}</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div>
              <div class="card">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">{{selectedDocument.intituleDocument}}</li>
                  <li class="list-group-item">{{selectedDocument.numeroDordre}}</li>
                  <li class="list-group-item">{{selectedDocument.dateCreation | date: 'medium'}}</li>
                  <li class="list-group-item"><a href="{{selectedDocument.documentUrl}}"><i class="fas fa-print"></i>Open/Print</a></li>
                  <li class="list-group-item">{{selectedDocument.documentId}}</li>
                  <li class="list-group-item">{{selectedDocument.typeDocument}}</li>
                  <li class="list-group-item">{{selectedDocument.nombrPage}}</li>
                  <li class="list-group-item">{{selectedDocument.dossierId}}</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!--Modal Add Document-->
    <div class="modal fade" id="addDocumentModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabeladdUser">New Document</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div>
              <form #newDocumentForm="ngForm"  (ngSubmit)="onAddNewDocument(newDocumentForm)">
                <div class="form-group">
                  <label for="intituleDocument">Intitule du Document</label>
                  <input type="text" name="intituleDocument" id="intituleDocument" required ngModel class="form-control">
                </div>
                <div class="form-group">
                  <label for="numeroDordre">Numero D'ordre</label>
                  <input type="text" name="numeroDordre" id="numeroDordre" required ngModel class="form-control">
                </div>
                <div class="form-group">
                  <label for="nombrPage">Nombre de Page</label>
                  <input type="text" name="nombrPage" id="nombrPage" required ngModel class="form-control">
                </div>
                <div class="form-group">
                  <label for="typeDocument">Type de Document</label>
                  <select name="typeDocument" id="typeDocument" required ngModel="ADMINISTRATIVE_ET_COMPTABLE" class="form-control">
                    <option value="ADMINISTRATIVE_ET_COMPTABLE">ADMINISTRATIVE_ET_COMPTABLE</option>
                  </select>
                </div>
                <div class="col form-group">
                  <label class="col-form-label col-sm-2">Dossier</label>
                  <select class="form-control" name="dossierId" ngModel="document.dossierId" id="example3FormControlSelect1">
                    <option ngValue="undefined">--Select un Dossier--</option>
                    <option *ngFor="let d of dossier" [ngValue]="d.id">{{d.nomDossier}}&nbsp;{{d.cote}}</option>
                  </select>
                </div>
                <div class="input-group mb-2">
                  <div class="input-group-prepend">
                    <span class="input-group-text">Document PDF</span>
                  </div>
                  <div class="input-group mb-3">
                    <input type="file"
                           (change)="handleDocumentPdfChange($event)"
                           name="documentPdf" class="form-control" >
                    <label class="input-group-text" >
                      <span [hidden]="!fileName">{{ fileName }}</span>
                      <span [hidden]="fileName">Choose File</span>
                    </label>
                  </div>
                </div>
                <button type="submit" style="display: none;" id="new-document-save"></button>
              </form>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="new-document-close">Close</button>
            <button type="button" (click)="saveNewDocument()" [disabled]="newDocumentForm.invalid" class="btn btn-primary">Add Document</button>
        </div>
      </div>
    </div>
    <!--End of Add Document-->

    </div>

    <!--Modal Edit Document-->
    <div class="modal fade" id="editDocumentModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title fs-5" id="exampleModalLabelEditDocument">Edit {{editDocument.intituleDocument}} {{editDocument.numeroDordre}}
              <small [hidden]="isAdminOrArchiveManager">(read only)</small></h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&nbsp;</span>
            </button>
          </div>
          <div class="modal-body">
            <div>
              <form #editdocumentForm="ngForm">
                <div class="form-group">
                  <label for="intituleDocument">Intitule Document</label>
                  <input type="text" name="intituleDocument"   required [(ngModel)]="editDocument.intituleDocument" class="form-control">
                </div>
                <div class="form-group">
                  <label for="numeroDordre">N# d'Ordre</label>
                  <input type="text" name="numeroDordre"  required  [(ngModel)]="editDocument.numeroDordre" class="form-control">
                </div>
                <div class="form-group">
                  <label for="nombrPage">Nombre de Page</label>
                  <input type="text" name="nombrPage" required [(ngModel)]="editDocument.nombrPage" class="form-control">
                </div>
                <div class="col form-group">
                  <label class="col-form-label col-sm-2">Dossier</label>
                  <select class="form-control" name="dossierId" ngModel="document.dossierId" id="exampl3FormControlSelect111">
                    <option ngValue="undefined">--Select un Dossier--</option>
                    <option *ngFor="let d of dossier" ngValue="d.id">{{d.nomDossier}}&nbsp;{{d.cote}}</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="typeDocument">Type de Document</label>
                  <select name="typeDocument"  required [(ngModel)]="editDocument.typeDocument" class="form-control">
                    <option value="ADMINISTRATIVE_ET_COMPTABLE">ADMINISTRATIVE_ET_COMPTABLE</option>
                  </select>
                </div>
                <div class="input-group mb-2">

                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text">Document PDF</span>
                    </div>
                    <input type="file" accept="application/pdf"
                           (change)="handleDocumentPdfChange($event)"
                           name="profileImage" class="form-control" >
                    <label class="input-group-text" >
                      <span [hidden]="!fileName">{{ fileName }}</span>
                      <span [hidden]="fileName">Choose File</span>
                    </label>
                  </div>
                </div>
                <button type="submit" style="display: none;" id="edit-document-save"></button>
              </form>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="edit-user-close">Close</button>
            <button type="button" (click)="onUpdateDocument()" [disabled]="editdocumentForm.invalid || isAdminOrArchiveManager" class="btn btn-primary">Update User</button>
          </div>
        </div>
      </div>
    </div>
    <!--End of Edit User-->

  </div>



  <!--======Dossier=======-->
  <div class="tab-pane fade " id="dossier-tab-pane" role="tabpanel" aria-labelledby="contact-tab" tabindex="0">
    <div class="row p-4">
      <div class="col-md-7 container ">
        <div class="card  mt-1 mb-4 justify-content-center bg-success-subtle">
          <div class="card-body">
            <div class="col mb-3 p-4">
              <div class="col-md-12">
                <div class="col-md-12 mb-3">
                  <h2>
                    <i class="fas fa-info-circle blue-color"></i>&nbsp;
                    Information du Dossier
                  </h2>
                </div>
                <div class="col-md-12 ">
                  <form action="">
                    <div class="row mb-3">
                      <div class="col">
                        <small  class="form-label">Nom Du Dossier</small>
                        <input type="text"  class="form-control" name="nomDossier"
                               [(ngModel)]="dossiers.nomDossier" placeholder="nomDossier">
                      </div>
                      <div class="col">
                        <small  class="form-label">Cote du Dossier</small>
                        <input type="text"  class="form-control" name="cote" [(ngModel)]="dossiers.cote">
                      </div>
                    </div>
                    <div class=" row mb-3">
                      <div class="col">
                        <small class="form-label">Etat Dossier</small>
                        <select  class="form-control" name="etatDossier" [(ngModel)]="dossiers.etatDossier" id="exmple3FormControlSelect1">
                          <option>OPEN</option>
                          <option>CLOSE</option>
                        </select>
                      </div>
                    </div>
                    <div class="row mb-3">
                      <div class="col">
                        <small  class="form-label">Date Extreme(Ex:2000-2001):</small>
                        <input type="text" name="dateExtreme" class="form-control" [(ngModel)]="dossiers.dateExtreme" placeholder="dateExtreme">
                      </div>
                      <div class="col form-group">
                        <small class="col-form-label col-sm-2">Boite d'archive</small>
                        <select class="form-control" name="boite" [(ngModel)]="dossiers.boiteDTO" id="exampless3FormControlSelect1">
                          <option [ngValue]="undefined">--Select une Boite--</option>
                          <option *ngFor="let b of boite" [ngValue]="b">NumeoBote{{b.numeroBoite}}</option>
                        </select>
                      </div>
                    </div>
                    <div class="row mb-3">
                      <div class="col">
                        <small  class="form-label">Description:</small>
                        <input type="text" name="description" class="form-control" [(ngModel)]="dossiers.description" placeholder="description">
                      </div>
                      <div class="col form-group">
                        <small class="col-form-label col-sm-2">Date Limite Conservation</small>
                        <input type="date" name="dateLimiteConservation" class="form-control" [(ngModel)]="dossiers.dateLimiteConservation" placeholder="dateLimiteConservation">
                      </div>
                    </div>
                    <div class="row mb-3">
                      <div class="col">
                        <small class="col-form-label col-sm-2">Responsable Traitement</small>
                        <select class="form-control" name="boite" [(ngModel)]="dossiers.responsableTraitementDTO" id="exampl2ess3FormControlSelect1">
                          <option [ngValue]="undefined">--Select Responsable Traitement--</option>
                          <option *ngFor="let r of responsable" [ngValue]="r">{{r.nomRt}}</option>
                        </select>
                      </div>
                      <div class="col">
                        <small class="form-label">Type Du Dossier</small>
                        <select  class="form-control" name="typeDocument" [(ngModel)]="dossiers.typeDossier" id="exmples3FormControlSelect1">
                          <option value="ADMINISTRATIVE_ET_COMPTABLE">ADMINISTRATIVE_ET_COMPTABLE</option>
                          <option value="CONTROLE_CONFORMITE">CONTROLE_CONFORMITE</option>
                        </select>
                      </div>
                    </div>
                    <div class="row mb-3">
                      <div class="col form-group">
                        <small class="col-form-label col-sm-2">Responsable Dossier</small>
                        <input type="text" name="responsable" class="form-control" [(ngModel)]="dossiers.responsable" placeholder="responsable">
                      </div>
                    </div>
                    <div class="col-md-12 text-end">
                      <button type="reset" class="btn btn-danger me-4">
                        <i class="fas fa-ban"></i>&nbsp;
                        Annuler
                      </button>
                      <button type="submit" class="btn btn-primary" (click)="handleSaveDossier()">
                        <i class="fas fa-save"></i>&nbsp;
                        Enregistrer
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--=====================Boite===================-->
  <div class="tab-pane fade" id="boite-tab-pane" role="tabpanel" aria-labelledby="disabled-tab" tabindex="0">
    <div class="container p-4">
      <div class="card bg-success-subtle">
        <div class="col mb-3 p-4">
          <hr>
          <div class="col-md-12">
            <div class="col-md-12 mb-3">
              <h2>
                <i class="fas fa-info-circle blue-color"></i>&nbsp;
                Information de la Boite
              </h2>
            </div>
            <div class="col-md-12 ">
              <form>
                <div class="row mb-3">
                  <div class="col form-group">
                    <label  class="form-label">Cote(numero de la boite):</label>
                    <input type="text" class="form-control" name="numeroBoite"
                           [(ngModel)]="boites.numeroBoite"
                           placeholder="Cote">
                  </div>
                  <div class="col form-group">
                    <label class="form-label">Etagere</label>
                    <select class="form-control" name="rangerDTO" [(ngModel)]="boites.rangerDTO" id="examplem3FormControlSelect1">
                      <option [ngValue]="undefined">--Select Etagere--</option>
                      <option *ngFor="let et of etagere" [ngValue]="et">Ranger N#{{et.numeroEtagere}}</option>
                    </select>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col form-group">
                    <label  class="form-label">Description:</label>
                    <input type="text" class="form-control" name="description"
                           [(ngModel)]="boites.description"
                           placeholder="Description">
                  </div>
                  <div class="col form-group">
                    <label class="form-label">Responsable Du Dossier</label>
                    <<input type="text" class="form-control" name="responsable"
                            [(ngModel)]="boites.responsable"
                            placeholder="Responsable">
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col form-group">
                    <label  class="form-label">Date Limite Conservation:</label>
                    <input type="datetime-local" class="form-control" name="dateLimiteConservation"
                           [(ngModel)]="boites.dateLimiteConservation"
                           placeholder="DateLimiteConservation">
                  </div>
                  <div class="col form-group">
                    <label class="form-label">Etagere</label>
                    <input type="text" class="form-control" name="emplacement"
                           [(ngModel)]="boites.emplacement"
                           placeholder="Emplacement">
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col form-group">
                    <label  class="form-label">Nombre de Dossier:</label>
                    <input type="text" class="form-control" name="nombreDossiers"
                           [(ngModel)]="boites.nombreDossiers"
                           placeholder="NombreDossiers">
                  </div>
                  <div class="col form-group">
                    <label class="form-label">Capacitee</label>
                    <input type="text" class="form-control" name="capacite"
                           [(ngModel)]="boites.capacite"
                           placeholder="Capacite">
                  </div>
                </div>
                <div class="col-md-12 text-end">
                  <button class="btn btn-danger me-4" (cancel)="boites">
                    <i class="fas fa-ban"></i>&nbsp;
                    Annuler
                  </button>
                  <button class="btn btn-primary" (click)="handleSaveBoite()">
                    <i class="fas fa-save"></i>&nbsp;
                    Enregistrer
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

